<!DOCTYPE html>
<html lang="ru">
<head>
 <script
  defer
  data-domain="andrewldnr-glitch.github.io"
  src="https://plausible.io/js/script.js">
</script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover" />
  <title>CS Aim Warm-up</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>

<body>

  <!-- Loader overlay -->
  <div id="loader" class="loader">
    <div class="loader-card">
      <div class="loader-title">CS Aim Warm-up</div>
      <div class="loader-subtitle">Загрузка…</div>

      <div class="progress">
        <div id="loaderBar" class="progress-bar"></div>
      </div>
      <div id="loaderPct" class="progress-text">0%</div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast"> </div>

  <div id="app">

    <!-- HOME -->
    <section id="home" class="screen active">
      <h1>CS Aim Warm-up</h1>
      <p class="subtitle">2–5 минут до катки</p>

      <div class="home-actions">
        <button id="startWarmup">Разминка (3:00)</button>
        <button id="startEndless" class="secondary">Endless (рекорд)</button>
      </div>

      <div class="home-stats">
        <div class="stat">
          <div class="statLabel">Streak</div>
          <div id="streak" class="statValue">—</div>
        </div>
        <div class="stat">
          <div class="statLabel">Best Endless</div>
          <div id="best" class="statValue">—</div>
        </div>
      </div>

      <div class="divider"></div>

      <h2 class="sectionTitle">Arcade</h2>
      <div class="mode-grid">
        <button id="modeShrink" class="modeCard">
          <div class="modeName">Shrink Arena</div>
          <div class="modeDesc">OSU-like stream</div>
        </button>

        <button id="modeFalling" class="modeCard">
          <div class="modeName">Falling</div>
          <div class="modeDesc">падают сверху</div>
        </button>

        <button id="modeFallingShrink" class="modeCard">
          <div class="modeName">Falling + Shrink</div>
          <div class="modeDesc">падают + уменьшаются</div>
        </button>
      </div>

      <!-- Raw Mouse настройки -->
      <div class="settings">
        <label class="toggle">
          <input type="checkbox" id="rawMouseToggle">
          Raw mouse (Desktop beta)
        </label>

        <div class="rangeRow">
          <span class="rangeLabel">Sens</span>
          <input id="sensRange" type="range" min="0.30" max="3.00" step="0.05" value="1.00">
          <span id="sensValue" class="rangeValue">1.00</span>
        </div>

        <div class="note">Работает на Desktop. На мобильном Telegram может быть недоступно.</div>
      </div>

      <div class="footerNote">
        Промах = конец. Разогрев без запуска CS.
      </div>
    </section>

    <!-- GAME -->
    <section id="game" class="screen">
      <header class="topbar">
        <button id="quitBtn" class="iconBtn" aria-label="Quit">✕</button>

        <div class="pills">
          <span id="modePill" class="pill">—</span>
          <span id="phasePill" class="pill pill-ghost">—</span>
        </div>

        <div class="hudRight">
          <span id="timer" class="hudItem">—</span>
          <span id="score" class="hudItem">—</span>
          <span id="lives" class="lives"></span>
        </div>
      </header>

      <div id="pace" class="pace pace--hidden" aria-hidden="true">
        <div id="paceFill" class="paceFill"></div>
      </div>

      <div id="playfield" class="playfield" aria-label="Playfield">
        <!-- flash overlay -->
        <div id="fieldFlash" class="fieldFlash" aria-hidden="true"></div>

        <!-- crosshair for Raw mouse -->
        <div id="crosshair" class="crosshair hidden"></div>
      </div>

      <div id="hint" class="hint"></div>
    </section>

    <!-- RESULT -->
    <section id="result" class="screen">
      <h2 id="resultTitle">—</h2>
      <p id="resultSubtitle" class="subtitle">—</p>

      <div id="resultStats" class="result-stats"></div>

      <div class="result-actions">
        <button id="replayBtn">Ещё</button>
        <button id="homeBtn" class="secondary">На главную</button>
        <button id="closeBtn" class="secondary">Закрыть</button>
      </div>
    </section>

  </div>

  <!-- Difficulty Sheet Overlay -->
  <div id="sheetOverlay" class="sheetOverlay hidden" aria-hidden="true">
    <div class="sheet">
      <div class="sheetHeader">
        <div>
          <div id="sheetTitle" class="sheetTitle">—</div>
          <div id="sheetSubtitle" class="sheetSubtitle">—</div>
        </div>
        <button id="sheetClose" class="iconBtn" aria-label="Close">✕</button>
      </div>

      <div class="diffGrid">
        <button id="diffEasy" class="diffCard">
          <div class="diffName">Easy</div>
          <div id="diffEasyMeta" class="diffMeta">—</div>
        </button>

        <button id="diffMed" class="diffCard">
          <div class="diffName">Med</div>
          <div id="diffMedMeta" class="diffMeta">—</div>
        </button>

        <button id="diffHard" class="diffCard">
          <div class="diffName">Hard</div>
          <div id="diffHardMeta" class="diffMeta">—</div>
        </button>
      </div>

      <div class="sheetFoot">
        Любой промах = поражение. Рекорды сохраняются локально.
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
